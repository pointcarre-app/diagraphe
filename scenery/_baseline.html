<!DOCTYPE html>
<html lang="en" data-theme="anchor">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scenery : Baseline</title>

    <!-- CSS Dependencies -->
    <link rel="stylesheet" href="../dependencies/google_fonts.css" />
    <link rel="stylesheet" href="../dependencies/open_dyslexic_regular.css" />
    <link rel="stylesheet" href="../dependencies/daisyui@5.css" />
    <link rel="stylesheet" href="../dependencies/daisyui@5themes.css" />


    <!-- Our CSS -->
    <!-- Just variables (fonts & themes) -->
    <link rel="stylesheet" href="../src/css/root.css" />

    <!-- SVG theming : ie fill / stroke for semantic colors (content variants) -->
    <link rel="stylesheet" href="../src/css/daisyui-svg-theming.css" />
    <link rel="stylesheet" href="../src/css/global.css" />

    <!-- JavaScript Dependencies -->
    <script src="../dependencies/tailwindcssbrowser@4.js"></script>


    <!-- Diagraphe Module -->
    <script type="module">
        import {
            Diagraphe,
            Element
        } from '../src/diagraphe.js';
        import {
            baselineDiagrapheDemos
        } from './_baseline_diagraphe_demos.js';

        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.querySelector('#grid');
            grid.innerHTML = '';

            baselineDiagrapheDemos.forEach((demo, index) => {
                const card = document.createElement('div');
                card.className = 'card bg-base-100 shadow-xl';
                card.setAttribute('data-demo-id', `demo-${index}`);

                // Build config display string
                const configStr = JSON.stringify(demo.config, null, 2)
                    .replace(/"([^"]+)":/g, '$1:'); // Remove quotes from keys

                card.innerHTML = `
                    <div class="card-body">
                        <h3 class="card-title text-sm">${demo.label}</h3>
                        <p class="text-xs text-base-content/60">${demo.description}</p>
                        <div class="graph-demo my-2"></div>
                        <details class="collapse collapse-arrow bg-base-200">
                            <summary class="collapse-title text-xs font-medium py-2 min-h-0">Config</summary>
                            <div class="collapse-content">
                                <pre class="text-xs overflow-x-auto"><code>${configStr}</code></pre>
                            </div>
                        </details>
                    </div>
                `;

                grid.appendChild(card);

                // Convert element configs to Element instances
                const config = {
                    ...demo.config
                };
                if (config.elements) {
                    config.elements = config.elements.map(elementConfig =>
                        new Element(elementConfig)
                    );
                }

                new Diagraphe({
                    container: card.querySelector('.graph-demo'),
                    ...config
                });
            });
        });
    </script>

    <!-- Theme Switcher Script -->
    <script>
        // Load theme from localStorage or use default
        function loadTheme() {
            const savedTheme = localStorage.getItem('daisyui-theme') || 'anchor';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateActiveTheme(savedTheme);
        }

        // Update the dropdown to show which theme is active
        function updateActiveTheme(currentTheme) {
            const dropdownItems = document.querySelectorAll('.dropdown-content a[data-theme]');
            dropdownItems.forEach(item => {
                const theme = item.getAttribute('data-theme');
                const text = item.textContent.replace(' âœ“', '');
                item.textContent = theme === currentTheme ? text + ' âœ“' : text;
            });
        }

        // Handle theme changes
        function switchTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('daisyui-theme', theme);
            updateActiveTheme(theme);
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();

            // Add click handlers to dropdown items
            const dropdownItems = document.querySelectorAll('.dropdown-content a[data-theme]');
            dropdownItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const theme = item.getAttribute('data-theme');
                    switchTheme(theme);
                });
            });
        });
    </script>

  </head>
  <body>
    <!-- Navbar -->
    <div class="navbar">
      <div class="navbar-start">
        <a class="btn btn-ghost text-xl">Scenery : Baseline</a>
      </div>
      <div class="navbar-end">
        <div class="dropdown dropdown-end">
          <div tabindex="0" role="button" class="btn btn-ghost">
            Theme
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <ul tabindex="0"
              class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow space-y-2 px-4">
            <li>
              <a data-theme="anchor">Anchor âœ“</a>
            </li>
            <li>
              <a data-theme="reinforced-contrast">Reinforced Contrast</a>
            </li>
            <li>
              <a data-theme="inversed-contrast">Inversed Contrast</a>
            </li>
            <li>
              <a data-theme="purple">Purple</a>
            </li>
            <li>
              <a data-theme="dark-black">Dark Black</a>
            </li>
            <li>
              <a data-theme="zelie">Zelie</a>
            </li>
            <li>
              <a data-theme="zelie-dark">Zelie Dark</a>
            </li>
            <li>
              <a data-theme="light-opt">Light Opt</a>
            </li>
            <li>
              <a data-theme="dark-opt">Dark Opt</a>
            </li>
            <li>
              <a data-theme="light-readable">Light Readable</a>
            </li>
            <li>
              <a data-theme="dark-readable">Dark Readable</a>
            </li>
            <li>
              <a data-theme="light">Light</a>
            </li>
            <li>
              <a data-theme="dark">Dark</a>
            </li>
            <li>
              <a data-theme="cupcake">Cupcake</a>
            </li>
            <li>
              <a data-theme="bumblebee">Bumblebee</a>
            </li>
            <li>
              <a data-theme="emerald">Emerald</a>
            </li>
            <li>
              <a data-theme="corporate">Corporate</a>
            </li>
            <li>
              <a data-theme="synthwave">Synthwave</a>
            </li>
            <li>
              <a data-theme="retro">Retro</a>
            </li>
            <li>
              <a data-theme="cyberpunk">Cyberpunk</a>
            </li>
            <li>
              <a data-theme="valentine">Valentine</a>
            </li>
            <li>
              <a data-theme="halloween">Halloween</a>
            </li>
            <li>
              <a data-theme="garden">Garden</a>
            </li>
            <li>
              <a data-theme="forest">Forest</a>
            </li>
            <li>
              <a data-theme="aqua">Aqua</a>
            </li>
            <li>
              <a data-theme="lofi">Lofi</a>
            </li>
            <li>
              <a data-theme="pastel">Pastel</a>
            </li>
            <li>
              <a data-theme="fantasy">Fantasy</a>
            </li>
            <li>
              <a data-theme="wireframe">Wireframe</a>
            </li>
            <li>
              <a data-theme="black">Black</a>
            </li>
            <li>
              <a data-theme="luxury">Luxury</a>
            </li>
            <li>
              <a data-theme="dracula">Dracula</a>
            </li>
            <li>
              <a data-theme="cmyk">CMYK</a>
            </li>
            <li>
              <a data-theme="autumn">Autumn</a>
            </li>
            <li>
              <a data-theme="business">Business</a>
            </li>
            <li>
              <a data-theme="acid">Acid</a>
            </li>
            <li>
              <a data-theme="lemonade">Lemonade</a>
            </li>
            <li>
              <a data-theme="night">Night</a>
            </li>
            <li>
              <a data-theme="coffee">Coffee</a>
            </li>
            <li>
              <a data-theme="winter">Winter</a>
            </li>
            <li>
              <a data-theme="dim">Dim</a>
            </li>
            <li>
              <a data-theme="nord">Nord</a>
            </li>
            <li>
              <a data-theme="sunset">Sunset</a>
            </li>
            <li>
              <a data-theme="caramellatte">Caramellatte</a>
            </li>
            <li>
              <a data-theme="abyss">Abyss</a>
            </li>
            <li>
              <a data-theme="silk">Silk</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <main id="main" class="container mx-auto p-4">
      <!-- Intro explaining viewBox -->
      <div class="card bg-base-200 shadow-xl mb-6">
        <div class="card-body">
          <h2 class="card-title">ðŸŽ¯ viewBox System</h2>
          <p class="text-sm">
            <strong>viewBox</strong> = internal coordinate system (fixed "grid paper").
            <br />
            <strong>width/height</strong> = rendered display size (the "photocopy size").
            <br />
            <strong>preserveAspectRatio</strong> = how to handle aspect ratio mismatch.
          </p>
          <div class="flex flex-wrap gap-2 mt-2">
            <span class="badge badge-primary">meet = fit inside</span>
            <span class="badge badge-secondary">slice = fill & clip</span>
            <span class="badge badge-accent">none = stretch</span>
          </div>
        </div>
      </div>
      <div id="grid" class="grid grid-cols-1 md:grid-cols-2  gap-4"></div>
    </main>
  </body>
</html>
